<html>
<head>
    <title>自动base64编码文件</title>
    <script type="text/javascript">
        function base64Encode(){
            var file = document.getElementById("input").files[0];
            var reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onloadend = function () {
                var base64File = reader.result; //reader.result就是base64编码后的字符串
                copyToClipBoard(base64File);//调用拷贝函数将结果拷贝到剪贴板
                // 等待2s, 刷新页面
                setTimeout(function(){
                    window.location.reload();
                }, 2000);
            };
         }
        
        //拷贝函数
        function copyToClipBoard(base64File){
            // 先生成一个textarea标签，可以用于操作剪贴板
            var textArea = document.createElement('textarea');
            textArea.value = base64File;
            document.body.appendChild(textArea);
            // 选中标签，复制
            textArea.select();
            document.execCommand('Copy');
            // 提醒用户已经拷贝到剪贴板
            alert("结果已拷贝✅，即将刷新页面");
            // 删除生成的textarea标签
            document.body.removeChild(textArea);
        }    
    </script>
</head>
<body> 
    <label>请选择要编码的文件：</label>
    <input type="file" id="input" onchange="base64Encode()" />
</body>
</html>
